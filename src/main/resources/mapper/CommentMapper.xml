<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.coderzhx.mapper.CommentMapper">
    <resultMap id="pageList1" type="cn.coderzhx.pojo.PageBean">
        <result column="currentPage" property="currentPage"/>
        <result column="totalCount" property="totalCount"/>
        <result column="pageSize" property="pageSize"/>
        <result column="totalPage" property="totalPage"/>
        <result column="index" property="index"/>
        <result column="word" property="word"/>
        <collection property="list" javaType="List" ofType="Comment" >
            <result column="id" property="id"/>
            <result column="qq" property="qq"/>
            <result column="username" property="username"/>
            <result column="common" property="common"/>
            <result column="create_time" property="create_time"/>
            <result column="hits" property="hits"/>
            <result column="status" property="status"/>
        </collection>
    </resultMap>
    <!--列出所有留言-->
    <select id="listComment" resultType="Comment" parameterType="cn.coderzhx.pojo.PageBean">
     select * from comment  where status=1 ORDER BY create_time DESC
    <if test="currentPage!=null and currentPage!=''">
        limit #{index},#{pageSize}
    </if>
    </select>
    <!--删除留言-->
<!--    <select id="delComment" parameterType="Integer">-->
<!--       delete  from comment where id=#{id};-->
<!--    </select>-->
    <!--列出留言个数-->
    <select id="countComment" resultType="Integer">
       select count(id) from comment;
    </select>
    <!--点赞-->
    <update id="addLike" parameterType="Integer">
        UPDATE comment SET hits=hits+1 WHERE id=#{id};
    </update>
    <insert id="addComment" parameterType="Comment">
        INSERT into comment(qq,username,common,create_time,hits,status)
        VALUES(#{qq},#{username},#{common},NOW(),#{hits},#{status})
    </insert>
</mapper>